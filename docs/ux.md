# AI 聊天平台 - 前端设计文档 (UX.md)

| **文档版本** | **V1.0 (Final)** | **关联PRD版本** | **V1.6 (Final)** |
| :--- | :--- | :--- | :--- |
| **创建者** | Gemini & (您的名字) | **状态** | 已完成 |

## 1. 概述 (Overview)

本文档基于 `PRD.md` 的功能需求和 `Architecture.md` 的技术框架，旨在为 AI 聊天平台提供一份全面的前端用户体验与界面设计指南。文档将详细描述应用的整体布局、页面构成、核心组件和关键交互流程，作为 UI 开发的视觉和体验蓝图。

## 2. UX 设计原则 (UX Design Principles)

所有界面和交互设计都应遵循以下核心原则：

*   **1. 简洁优雅 (Elegant & Simple):** 界面设计应采用现代、简约的风格。避免不必要的视觉元素，将用户的注意力完全集中在对话内容上。留白、清晰的字体和一致的间距是关键。
*   **2. 流畅的交互 (Fluid Interaction):** 应用的响应应感觉即时和流畅。加载状态、按钮点击反馈、流式打字机效果等都应有平滑的过渡动画，提供不卡顿、不突兀的体验。
*   **3. 直观易用 (Intuitive & Easy to Use):** 所有功能都应在用户最需要它的地方出现。操作路径应尽可能短，图标和标签的含义应清晰明确，无需用户思考或猜测。
*   **4. 响应式与可访问性 (Responsive & Accessible):** 界面必须在桌面、平板和手机等不同尺寸的设备上都提供一致且优秀的体验。颜色对比度、字体大小等需考虑可访问性标准，方便所有用户使用。

## 3. 整体布局 (Master Layout)

应用的主界面将采用经典的**三段式布局**，这也是 ChatGPT、OpenWebUI 等主流应用验证过的、最高效的布局方式。

```
+--------------------------------+--------------------------------------+
|                                |                                      |
|  侧边栏 (Sidebar)              |      主内容区 (Main Content)         |
|                                |                                      |
|  +--------------------------+  |  +--------------------------------+  |
|  |      [ 新建聊天 ]        |  |  |      聊天消息记录区域          |  |
|  +--------------------------+  |  |                                |  |
|  |                          |  |  |                                |  |
|  |      历史会话列表        |  |  |                                |  |
|  |       (可滚动)           |  |  |         (可滚动)               |  |
|  |                          |  |  |                                |  |
|  |                          |  |  +--------------------------------+  |
|  +--------------------------+  |  |      聊天输入框区域            |  |
|  |      [ 设置 / 退出 ]     |  |  +--------------------------------+  |
|  +--------------------------+  |                                      |
|                                |                                      |
+--------------------------------+--------------------------------------+
```

*   **侧边栏 (Sidebar):** 始终固定在左侧。负责会话管理和应用级导航（如设置）。
*   **主内容区 (Main Content):** 占据页面的主要部分。负责展示核心内容，即聊天对话。

## 4. 页面蓝图 (Page Blueprints)

应用主要由以下几个核心页面（或页面状态）构成。

### 4.1 登录/注册页 `(Auth Page)`

*   **路径:** `/login`, `/register`
*   **布局:** 单栏居中布局。
*   **组件:**
    *   应用 Logo。
    *   **表单容器:** 包含清晰的输入框（用户名、密码）、提交按钮。
    *   **切换链接:** 在登录页提供“还没有账户？立即注册”的链接，反之亦然。
*   **设计要点:** 界面干净，除了核心的登录/注册功能外无任何干扰元素。

### 4.2 聊天主页 `(Chat Page)`

*   **路径:** `/` (根路径)
*   **布局:** 采用第3节定义的**三段式主布局**。
*   **页面状态:**
    *   **欢迎状态 (Empty State):** 当用户刚进入或没有任何选中的会话时，主内容区应显示欢迎语、应用简介或一些快捷操作提示（Prompt examples），而不是一片空白。
    *   **对话状态 (Conversation State):** 当用户选中或新建一个会话时，主内容区会渲染聊天消息和输入框。

## 5. 核心UI组件详解 (Component Breakdown)

这些是构成聊天主页的关键“积木”，它们的设计将直接影响用户体验。

### 5.1 侧边栏 (Sidebar)

*   **功能:** 会话管理与导航。
*   **构成:**
    *   **[+] 新建聊天按钮:** 位于顶部，样式突出，引导用户开启新对话。
    *   **历史会话列表:**
        *   **列表项:** 每一项代表一个历史会话。应显示会话标题。
        *   **交互:**
            *   鼠标悬停 (Hover) 时应有视觉反馈（如背景色变浅）。
            *   当前选中的会话项应有高亮样式，以明确告知用户当前在哪一个对话中。
            *   每个列表项右侧应提供“删除”和“重命名”的操作按钮（可默认隐藏，鼠标悬停时显示）。
    *   **底部操作区:**
        *   **用户头像/名称:** 点击后弹出菜单。
        *   **弹出菜单:** 包含“设置”、“退出登录”、“关于”等链接。
        *   **主题切换按钮 (可选):** 一个太阳/月亮图标，用于快速切换浅色/深色模式。

### 5.2 聊天消息区 (Message Area)

*   **功能:** 展示对话历史。
*   **构成:**
    *   **消息气泡 (Message Bubble):**
        *   **角色区分:** 用户和 AI 的消息气泡应有明显区分（例如，用户靠右，AI靠左；或颜色不同）。
        *   **头像:** 每个气泡旁应有代表用户或 AI 的头像。
        *   **内容渲染:**
            *   **Markdown 支持:** 必须能正确渲染代码块（带语法高亮和一键复制按钮）、列表、粗体、斜体、引用块、表格等。
            *   **排版:** 字体大小和行高应优化，确保长时间阅读的舒适性。
    *   **消息操作栏:**
        *   在每条 **AI 的消息** 右下角（或鼠标悬停时），应提供一组小图标按钮：
            *   **[复制]:** 复制该条消息的全部内容。
            *   **[重试/重新生成]:** 让 AI 重新回答最后一个问题。

### 5.3 聊天输入区 (Input Area)

*   **功能:** 用户输入问题。
*   **构成:**
    *   **文本输入框 (Textarea):**
        *   **自适应高度:** 输入框应能根据内容的行数自动增高，避免出现内部滚动条。
        *   **占位提示 (Placeholder):** 如“开始提问...”或“Shift+Enter 换行”。
    *   **[发送] 按钮:** 一个清晰的发送图标按钮。在 AI 正在生成回答时，此按钮应变为 **[停止] 按钮**，允许用户中断生成。
    *   **模型选择器 (Model Selector):** 一个下拉菜单，位于输入框上方或角落。
        *   **功能:** 允许用户在当前会话中切换使用的 AI 模型。
        *   **列表项:** 清晰地展示模型的名称，可以分组显示“个人模型”和“系统模型”。

## 6. 关键用户流程 (Key User Flows)

本节通过分步描述，将核心功能的用户体验旅程可视化。

### 6.1 流程一：开始一次全新的聊天

1.  **进入应用:** 用户登录后，看到主界面。左侧是空的会话列表（或历史列表），右侧是欢迎页面。
2.  **点击“新建聊天”:** 用户点击侧边栏顶部的 `[+] 新建聊天` 按钮。
3.  **界面变化:**
    *   主内容区的欢迎页面切换为聊天界面。
    *   聊天消息区为空。
    *   输入框自动获得焦点，光标闪烁，等待用户输入第一个问题。
4.  **输入并发送:** 用户输入问题，点击发送。
5.  **AI 响应:**
    *   输入框内容清空并暂时禁用。
    *   用户的消息气泡立刻出现在消息区。
    *   AI 的消息气泡出现，并以打字机效果逐字显示内容。发送按钮变为停止按钮。
6.  **响应结束:**
    *   AI 消息完全显示。停止按钮变回发送按钮。输入框恢复可用。
    *   在左侧的会话列表中，一个以用户第一个问题为标题的新会话项被创建并高亮显示。

### 6.2 流程二：配置并使用一个新的个人模型

1.  **进入设置:** 用户点击侧边栏底部的用户头像，在弹出菜单中选择“设置”。
2.  **切换到模型配置:** 在设置页面中，用户切换到“模型配置”标签页。
3.  **界面展示:** 页面显示一个列表，包含已配置的个人模型，以及一个 `[添加新模型]` 按钮。
4.  **添加模型:** 用户点击 `[添加新模型]`，弹出一个表单模态框（或跳转到新页面）。
5.  **填写信息:** 用户在表单中填写 `API 名称`、`API Endpoint (URL)` 和 `API Key`，然后点击保存。
6.  **返回列表:** 新配置的模型出现在列表中，并有成功提示。
7.  **返回聊天:** 用户关闭设置，回到聊天主页。
8.  **切换模型:** 在聊天输入区的模型选择器下拉菜单中，用户现在可以看到并选择刚刚添加的“个人模型”，并用它进行对话。

## 7. 视觉风格 (Visual Style)

*   **色彩主题 (Color Palette):**
    *   提供 **浅色 (Light Mode)** 和 **深色 (Dark Mode)** 两种主题，并支持根据操作系统偏好自动切换。
    *   **浅色模式:** 以白色/极浅灰色为背景，深灰色文字，搭配一个温和、不刺眼的品牌色（例如：柔和的蓝色、青色）作为高亮和点缀。
    *   **深色模式:** 以深灰/近黑色为背景，浅灰色文字，品牌色相应地调整饱和度和亮度，确保在深色背景下同样清晰舒适。
*   **字体 (Typography):**
    *   **界面字体:** 选择一款现代、清晰的无衬线字体（例如：Inter, Lato, 系统默认UI字体）。
    *   **代码字体:** 在渲染代码块时，必须使用等宽字体（例如：Fira Code, JetBrains Mono），以保证代码对齐和可读性。
*   **图标 (Iconography):**
    *   使用风格统一、辨识度高的线性图标库（例如：Lucide, Heroicons）。图标应简洁明了，避免过于复杂的设计。
*   **动画与过渡 (Animation & Transition):**
    *   所有状态切换、组件显隐都应伴随**快速而平滑**的过渡动画（如淡入淡出、滑动），避免生硬的瞬变。
    *   动画效果旨在提升流畅感，不应过度设计或拖慢用户操作。